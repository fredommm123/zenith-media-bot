# –°–∏—Å—Ç–µ–º–∞ –Ω–∞–∫–æ–ø–ª–µ–Ω–∏—è –±–∞–ª–∞–Ω—Å–∞ –∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏—Ö –≤—ã–ø–ª–∞—Ç

## üìù –û–ø–∏—Å–∞–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏

–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ —Å–∏—Å—Ç–µ–º–∞ –Ω–∞–∫–æ–ø–ª–µ–Ω–∏—è —Å—Ä–µ–¥—Å—Ç–≤ –Ω–∞ –±–∞–ª–∞–Ω—Å–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–º–∏ –≤—ã–ø–ª–∞—Ç–∞–º–∏ –ø—Ä–∏ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–∏ –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–≥–æ –ø–æ—Ä–æ–≥–∞.

---

## üéØ –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç

### 1. –í–∏–¥–µ–æ —Å –¥–æ—Ö–æ–¥–æ–º < 1 USDT
- **–î–µ–Ω—å–≥–∏ –∑–∞—á–∏—Å–ª—è—é—Ç—Å—è –Ω–∞ –±–∞–ª–∞–Ω—Å** –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–∏–¥–∏—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ –∑–∞—á–∏—Å–ª–µ–Ω–∏–∏
- –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è —Ç–µ–∫—É—â–∏–π –±–∞–ª–∞–Ω—Å –∏ —Å–∫–æ–ª—å–∫–æ –æ—Å—Ç–∞–ª–æ—Å—å –Ω–∞–∫–æ–ø–∏—Ç—å –¥–æ 1 USDT

### 2. –í–∏–¥–µ–æ —Å –¥–æ—Ö–æ–¥–æ–º ‚â• 1 USDT
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è **–∫–Ω–æ–ø–∫–∞ "–ó–∞–ø—Ä–æ—Å–∏—Ç—å –≤—ã–ø–ª–∞—Ç—É"**
- –ü—Ä–∏ –Ω–∞–∂–∞—Ç–∏–∏ –¥–µ–Ω—å–≥–∏ **–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏** –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è —á–µ—Ä–µ–∑ Crypto Bot

### 3. –í—ã–≤–æ–¥ –Ω–∞–∫–æ–ø–ª–µ–Ω–Ω–æ–≥–æ –±–∞–ª–∞–Ω—Å–∞
- –ö–æ–≥–¥–∞ –±–∞–ª–∞–Ω—Å ‚â• 1 USDT ‚Üí –≤ –ø—Ä–æ—Ñ–∏–ª–µ –ø–æ—è–≤–ª—è–µ—Ç—Å—è –∫–Ω–æ–ø–∫–∞ **"üí∏ –ó–∞–ø—Ä–æ—Å–∏—Ç—å –≤—ã–ø–ª–∞—Ç—É"**
- –ü—Ä–∏ –Ω–∞–∂–∞—Ç–∏–∏:
  - –ë–∞–ª–∞–Ω—Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤—ã–≤–æ–¥–∏—Ç—Å—è —á–µ—Ä–µ–∑ Crypto Bot
  - –ë–∞–ª–∞–Ω—Å –æ–±–Ω—É–ª—è–µ—Ç—Å—è
  - –°—É–º–º–∞ –¥–æ–±–∞–≤–ª—è–µ—Ç—Å—è –∫ `total_withdrawn`

---

## üíª –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### –ò–∑–º–µ–Ω–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã:

#### 1. `handlers/admin.py`
**–§—É–Ω–∫—Ü–∏—è:** `approve_video()`

**–õ–æ–≥–∏–∫–∞:**
```python
# –†–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ–º –≤—ã–ø–ª–∞—Ç—É –∑–∞ –≤–∏–¥–µ–æ
payout_amount = await calculate_payout_amount(views, platform, user_id, video_id)

# –ö–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É–µ–º –≤ USDT
rate = await get_exchange_rate_rub_to_usdt()
usdt_amount = payout_amount / rate

if usdt_amount < 1.0:
    # ‚úÖ –ó–∞—á–∏—Å–ª—è–µ–º –Ω–∞ –±–∞–ª–∞–Ω—Å
    await db.update_user_balance(user_id, payout_amount, operation='add')
    
    # –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Å–∫–æ–ª—å–∫–æ –æ—Å—Ç–∞–ª–æ—Å—å –Ω–∞–∫–æ–ø–∏—Ç—å
    new_balance_usdt = new_balance / rate
    if new_balance_usdt >= 1.0:
        # –ú–æ–∂–Ω–æ –≤—ã–≤–µ—Å—Ç–∏!
        message += "‚úÖ –í—ã –º–æ–∂–µ—Ç–µ –≤—ã–≤–µ—Å—Ç–∏ –¥–µ–Ω—å–≥–∏!"
    else:
        needed_rub = (1.0 - new_balance_usdt) * rate
        message += f"–û—Å—Ç–∞–ª–æ—Å—å –Ω–∞–∫–æ–ø–∏—Ç—å: ~{needed_rub:.2f} ‚ÇΩ"
else:
    # ‚úÖ –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –∫–Ω–æ–ø–∫—É –≤—ã–ø–ª–∞—Ç—ã
    # –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–∞–∂–º–µ—Ç ‚Üí –¥–µ–Ω—å–≥–∏ —Å—Ä–∞–∑—É —É–ª–µ—Ç—è—Ç
```

---

#### 2. `handlers/payouts.py`
**–ù–æ–≤–∞—è —Ñ—É–Ω–∫—Ü–∏—è:** `request_balance_payout_callback()`

**–ß—Ç–æ –¥–µ–ª–∞–µ—Ç:**
1. –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –±–∞–ª–∞–Ω—Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
2. –ö–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É–µ—Ç –≤ USDT
3. –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –º–∏–Ω–∏–º—É–º (1 USDT)
4. –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –ø–ª–∞—Ç–µ–∂ —á–µ—Ä–µ–∑ Crypto Bot
5. –û–±–Ω—É–ª—è–µ—Ç –±–∞–ª–∞–Ω—Å –ø—Ä–∏ —É—Å–ø–µ—Ö–µ
6. –û–±–Ω–æ–≤–ª—è–µ—Ç `total_withdrawn`

**–ö–æ–¥:**
```python
@router.callback_query(F.data == "request_balance_payout")
async def request_balance_payout_callback(callback: CallbackQuery):
    user = await db.get_user(user_id)
    balance = user['balance']
    
    # –ü—Ä–æ–≤–µ—Ä—è–µ–º –º–∏–Ω–∏–º—É–º
    usdt_amount = balance / rate
    if usdt_amount < 1.0:
        await callback.answer("‚ùå –ú–∏–Ω–∏–º—É–º 1 USDT")
        return
    
    # –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –≤—ã–ø–ª–∞—Ç—É
    payment_result = await send_payment(...)
    
    if payment_result['success']:
        # –û–±–Ω—É–ª—è–µ–º –±–∞–ª–∞–Ω—Å
        await db.update_user_balance(user_id, 0, operation='set')
        
        # –û–±–Ω–æ–≤–ª—è–µ–º —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É
        await db.update_user_stats_withdrawal(user_id, balance)
```

---

#### 3. `core/database.py`
**–ù–æ–≤—ã–µ/–∏–∑–º–µ–Ω–µ–Ω–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏:**

1. **`update_user_balance()`** - —Ä–∞—Å—à–∏—Ä–µ–Ω–∞:
```python
async def update_user_balance(self, user_id: int, amount: float, operation: str = 'add'):
    """
    operation: 'add' | 'subtract' | 'set'
    """
    if operation == 'add':
        await db.execute("UPDATE users SET balance = balance + ? WHERE user_id = ?", ...)
    elif operation == 'subtract':
        await db.execute("UPDATE users SET balance = balance - ? WHERE user_id = ?", ...)
    elif operation == 'set':
        await db.execute("UPDATE users SET balance = ? WHERE user_id = ?", ...)
```

2. **`update_user_stats_withdrawal()`** - –Ω–æ–≤–∞—è:
```python
async def update_user_stats_withdrawal(self, user_id: int, amount: float):
    """–û–±–Ω–æ–≤–ª—è–µ—Ç total_withdrawn"""
    await db.execute(
        "UPDATE users SET total_withdrawn = total_withdrawn + ? WHERE user_id = ?",
        (amount, user_id)
    )
```

---

#### 4. `core/keyboards.py`
**–ò–∑–º–µ–Ω–µ–Ω–∏–µ:** –î–æ–±–∞–≤–ª–µ–Ω –ø–∞—Ä–∞–º–µ—Ç—Ä `balance` –≤ `profile_keyboard()`

```python
def profile_keyboard(has_tiktok: bool = False, has_youtube: bool = False, balance: float = 0):
    builder = InlineKeyboardBuilder()
    
    # ... –¥—Ä—É–≥–∏–µ –∫–Ω–æ–ø–∫–∏ ...
    
    # –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –∫–Ω–æ–ø–∫—É "–ó–∞–ø—Ä–æ—Å–∏—Ç—å –≤—ã–ø–ª–∞—Ç—É" –µ—Å–ª–∏ –±–∞–ª–∞–Ω—Å > 0
    if balance > 0:
        builder.row(
            InlineKeyboardButton(text="üí∏ –ó–∞–ø—Ä–æ—Å–∏—Ç—å –≤—ã–ø–ª–∞—Ç—É", callback_data="request_balance_payout")
        )
    
    return builder.as_markup()
```

---

#### 5. `handlers/profile.py`
**–ò–∑–º–µ–Ω–µ–Ω–∏–µ:** –ü–µ—Ä–µ–¥–∞–µ–º –±–∞–ª–∞–Ω—Å –≤ –∫–ª–∞–≤–∏–∞—Ç—É—Ä—É

```python
await message.answer(
    profile_text, 
    reply_markup=profile_keyboard(
        has_tiktok=bool(tiktok), 
        has_youtube=bool(youtube), 
        balance=user['balance']  # ‚úÖ –ü–µ—Ä–µ–¥–∞–µ–º –±–∞–ª–∞–Ω—Å
    )
)
```

---

## üìä –ü—Ä–∏–º–µ—Ä —Ä–∞–±–æ—Ç—ã

### –°—Ü–µ–Ω–∞—Ä–∏–π 1: –ú–∞–ª—ã–π –¥–æ—Ö–æ–¥ (< 1 USDT)

**–í–∏–¥–µ–æ:** 500 –ø—Ä–æ—Å–º–æ—Ç—Ä–æ–≤ TikTok

**–†–∞—Å—á–µ—Ç:**
- –°—Ç–∞–≤–∫–∞: 65‚ÇΩ / 1000 –ø—Ä–æ—Å–º–æ—Ç—Ä–æ–≤
- –î–æ—Ö–æ–¥: (500 / 1000) √ó 65 = **32.5‚ÇΩ**
- –í USDT: 32.5 / 95 ‚âà **0.34 USDT** ‚ùå < 1 USDT

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
```
‚úÖ –í–∞—à–µ –≤–∏–¥–µ–æ –æ–¥–æ–±—Ä–µ–Ω–æ!

üí∞ –ù–∞—á–∏—Å–ª–µ–Ω–æ: 32.5 ‚ÇΩ (~0.3421 USDT)

üí≥ –î–µ–Ω—å–≥–∏ –∑–∞—á–∏—Å–ª–µ–Ω—ã –Ω–∞ –≤–∞—à –±–∞–ª–∞–Ω—Å!
üí∞ –¢–µ–∫—É—â–∏–π –±–∞–ª–∞–Ω—Å: 32.5 ‚ÇΩ (~0.3421 USDT)

‚ÑπÔ∏è –ú–∏–Ω–∏–º—É–º –¥–ª—è –≤—ã–≤–æ–¥–∞: 1 USDT
–û—Å—Ç–∞–ª–æ—Å—å –Ω–∞–∫–æ–ø–∏—Ç—å: ~62.50 ‚ÇΩ
```

---

### –°—Ü–µ–Ω–∞—Ä–∏–π 2: –ù–∞–∫–æ–ø–ª–µ–Ω–∏–µ –Ω–∞ –±–∞–ª–∞–Ω—Å–µ

**–í–∏–¥–µ–æ 1:** 32.5‚ÇΩ ‚Üí –ë–∞–ª–∞–Ω—Å: 32.5‚ÇΩ (0.34 USDT)  
**–í–∏–¥–µ–æ 2:** 45‚ÇΩ ‚Üí –ë–∞–ª–∞–Ω—Å: 77.5‚ÇΩ (0.82 USDT)  
**–í–∏–¥–µ–æ 3:** 25‚ÇΩ ‚Üí –ë–∞–ª–∞–Ω—Å: 102.5‚ÇΩ (1.08 USDT) ‚úÖ

**–†–µ–∑—É–ª—å—Ç–∞—Ç –ø–æ—Å–ª–µ –≤–∏–¥–µ–æ 3:**
```
‚úÖ –í–∞—à–µ –≤–∏–¥–µ–æ –æ–¥–æ–±—Ä–µ–Ω–æ!

üí∞ –ù–∞—á–∏—Å–ª–µ–Ω–æ: 25 ‚ÇΩ (~0.2632 USDT)

üí≥ –î–µ–Ω—å–≥–∏ –∑–∞—á–∏—Å–ª–µ–Ω—ã –Ω–∞ –≤–∞—à –±–∞–ª–∞–Ω—Å!
üí∞ –¢–µ–∫—É—â–∏–π –±–∞–ª–∞–Ω—Å: 102.5 ‚ÇΩ (~1.0789 USDT)

‚úÖ –í—ã –º–æ–∂–µ—Ç–µ –≤—ã–≤–µ—Å—Ç–∏ –¥–µ–Ω—å–≥–∏!
–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫–æ–º–∞–Ω–¥—É /profile ‚Üí üí∏ –ó–∞–ø—Ä–æ—Å–∏—Ç—å –≤—ã–ø–ª–∞—Ç—É
```

**–í –ø—Ä–æ—Ñ–∏–ª–µ –ø–æ—è–≤–ª—è–µ—Ç—Å—è –∫–Ω–æ–ø–∫–∞:**
```
[üí∏ –ó–∞–ø—Ä–æ—Å–∏—Ç—å –≤—ã–ø–ª–∞—Ç—É]
```

**–ü—Ä–∏ –Ω–∞–∂–∞—Ç–∏–∏:**
```
‚úÖ –í—ã–ø–ª–∞—Ç–∞ —É—Å–ø–µ—à–Ω–æ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∞!

üí∞ –°—É–º–º–∞: 102.5 ‚ÇΩ
üíµ –í USDT: 1.078947 USDT

üí≥ –í—ã–ø–ª–∞—á–µ–Ω–æ —Å –±–∞–ª–∞–Ω—Å–∞ –∞–∫–∫–∞—É–Ω—Ç–∞
üíº –ù–æ–≤—ã–π –±–∞–ª–∞–Ω—Å: 0.00 ‚ÇΩ

üéâ –î–µ–Ω—å–≥–∏ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω—ã –Ω–∞ –≤–∞—à @CryptoBot –∞–∫–∫–∞—É–Ω—Ç!
```

---

### –°—Ü–µ–Ω–∞—Ä–∏–π 3: –ë–æ–ª—å—à–æ–π –¥–æ—Ö–æ–¥ (‚â• 1 USDT)

**–í–∏–¥–µ–æ:** 2000 –ø—Ä–æ—Å–º–æ—Ç—Ä–æ–≤ TikTok

**–†–∞—Å—á–µ—Ç:**
- –î–æ—Ö–æ–¥: (2000 / 1000) √ó 65 = **130‚ÇΩ**
- –í USDT: 130 / 95 ‚âà **1.37 USDT** ‚úÖ ‚â• 1 USDT

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
```
‚úÖ –í–∞—à–µ –≤–∏–¥–µ–æ –æ–¥–æ–±—Ä–µ–Ω–æ!

üí∞ –í—ã–ø–ª–∞—Ç–∞: 130 ‚ÇΩ (~1.3684 USDT)

‚¨áÔ∏è –ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É –Ω–∏–∂–µ –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –≤—ã–ø–ª–∞—Ç—ã:
[üí∞ –ó–∞–ø—Ä–æ—Å–∏—Ç—å –≤—ã–ø–ª–∞—Ç—É]
```

**–ü—Ä–∏ –Ω–∞–∂–∞—Ç–∏–∏ –∫–Ω–æ–ø–∫–∏:**
```
‚è≥ –û—Ç–ø—Ä–∞–≤–∫–∞ –≤—ã–ø–ª–∞—Ç—ã...

‚úÖ –í—ã–ø–ª–∞—Ç–∞ —É—Å–ø–µ—à–Ω–æ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∞!

üí∞ –°—É–º–º–∞: 130.00 ‚ÇΩ
üíµ –í USDT: 1.368421 USDT

üìä –í–∏–¥–µ–æ ID: 123
üëÅ –ü—Ä–æ—Å–º–æ—Ç—Ä–æ–≤: 2,000

üéâ –î–µ–Ω—å–≥–∏ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω—ã –Ω–∞ –≤–∞—à @CryptoBot –∞–∫–∫–∞—É–Ω—Ç!
```

---

## ‚úÖ –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ —Å–∏—Å—Ç–µ–º—ã

1. **–ù–µ —Ç–µ—Ä—è—é—Ç—Å—è –º–∞–ª–µ–Ω—å–∫–∏–µ —Å—É–º–º—ã** - –≤—Å–µ –∫–æ–ø–∏—Ç—Å—è –Ω–∞ –±–∞–ª–∞–Ω—Å–µ
2. **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –≤—ã–ø–ª–∞—Ç—ã** - –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é –Ω–µ –Ω—É–∂–Ω–æ –∂–¥–∞—Ç—å –∞–¥–º–∏–Ω–∞
3. **–ü—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç—å** - –≤–∏–¥–Ω–æ —Å–∫–æ–ª—å–∫–æ –Ω–∞–∫–æ–ø–ª–µ–Ω–æ –∏ —Å–∫–æ–ª—å–∫–æ –æ—Å—Ç–∞–ª–æ—Å—å
4. **–ú–µ–Ω—å—à–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π** - Crypto Bot –±–µ—Ä–µ—Ç –∫–æ–º–∏—Å—Å–∏—é, –ª—É—á—à–µ –≤—ã–≤–æ–¥–∏—Ç—å –∫—Ä—É–ø–Ω—ã–º–∏ —Å—É–º–º–∞–º–∏

---

## üîó –°—Å—ã–ª–∫–∏

- **GitHub:** https://github.com/fredommm123/zenith-media-bot
- **–ö–æ–º–º–∏—Ç:** d731242 "–°–∏—Å—Ç–µ–º–∞ –Ω–∞–∫–æ–ø–ª–µ–Ω–∏—è –±–∞–ª–∞–Ω—Å–∞"
- **VDS:** 185.176.94.108 (/zenithmedia_bot)
- **–°—Ç–∞—Ç—É—Å:** ‚úÖ –†–∞–∑–≤–µ—Ä–Ω—É—Ç–æ –∏ —Ä–∞–±–æ—Ç–∞–µ—Ç

---

## üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ü—Ä–∏ –≤–æ–∑–Ω–∏–∫–Ω–æ–≤–µ–Ω–∏–∏ –ø—Ä–æ–±–ª–µ–º –ø—Ä–æ–≤–µ—Ä—å—Ç–µ:
1. –õ–æ–≥–∏: `journalctl -u zenithmedia-bot -n 50`
2. –ë–∞–ª–∞–Ω—Å Crypto Bot: –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å ‚â• 1 USDT
3. Username –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è: –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –≤ Telegram
