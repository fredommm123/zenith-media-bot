# –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –æ—Ç 08.10.2025

## ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

### 1. –ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è —Å—É–º–º–∞ –≤—ã–ø–ª–∞—Ç—ã
**–ü—Ä–æ–±–ª–µ–º–∞:** –ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è —Å—É–º–º–∞ –±—ã–ª–∞ –∂–µ—Å—Ç–∫–æ –∑–∞–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∞ –∫–∞–∫ 1 USDT (~95‚ÇΩ)

**–†–µ—à–µ–Ω–∏–µ:**
- ‚úÖ –ò–∑–º–µ–Ω–µ–Ω–∞ –º–∏–Ω–∏–º–∞–ª—å–Ω–∞—è —Å—É–º–º–∞ –≤ `core/crypto_pay.py` —Å 1.0 USDT –Ω–∞ 0.1 USDT
- ‚úÖ –í `handlers/payouts.py` —Ç–µ–ø–µ—Ä—å –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `MIN_WITHDRAWAL` –∏–∑ config (30‚ÇΩ)
- ‚úÖ –í `core/config.py` —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ `MIN_WITHDRAWAL = 30`

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –º–æ–≥—É—Ç –≤—ã–≤–æ–¥–∏—Ç—å –æ—Ç 30‚ÇΩ (‚âà0.37 USDT)

---

### 2. Database is locked
**–ü—Ä–æ–±–ª–µ–º–∞:** –û—à–∏–±–∫–∞ `sqlite3.OperationalError: database is locked` –ø—Ä–∏ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏—è—Ö

**–†–µ—à–µ–Ω–∏–µ:**
- ‚úÖ –í–∫–ª—é—á–µ–Ω WAL (Write-Ahead Logging) —Ä–µ–∂–∏–º: `PRAGMA journal_mode=WAL`
- ‚úÖ –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω —Ç–∞–π–º–∞—É—Ç 30 —Å–µ–∫—É–Ω–¥: `PRAGMA busy_timeout=30000`
- ‚úÖ –í—Å–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –ë–î –∏—Å–ø–æ–ª—å–∑—É—é—Ç `timeout=30.0`
- ‚úÖ –ì–ª–æ–±–∞–ª—å–Ω–∞—è –∑–∞–º–µ–Ω–∞ –≤—Å–µ—Ö `aiosqlite.connect(self.db_path)` –Ω–∞ –≤–µ—Ä—Å–∏—é —Å —Ç–∞–π–º–∞—É—Ç–æ–º

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö —Ç–µ–ø–µ—Ä—å –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –∫–æ–Ω–∫—É—Ä–µ–Ω—Ç–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –±–µ–∑ –±–ª–æ–∫–∏—Ä–æ–≤–æ–∫

---

### 3. –£–ª—É—á—à–µ–Ω–∏–µ –Ω–∞–¥–µ–∂–Ω–æ—Å—Ç–∏

**–ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ `core/database.py`:**
```python
# –î–æ:
async with aiosqlite.connect(self.db_path) as db:

# –ü–æ—Å–ª–µ:
async with aiosqlite.connect(self.db_path, timeout=30.0) as db:
    await db.execute("PRAGMA journal_mode=WAL")
    await db.execute("PRAGMA busy_timeout=30000")
```

**–ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ `core/crypto_pay.py`:**
```python
# –î–æ:
if usdt_amount < 1.0:
    return {"error": "–ú–∏–Ω–∏–º—É–º ~1 USDT"}

# –ü–æ—Å–ª–µ:
if usdt_amount < 0.1:
    return {"error": "–ú–∏–Ω–∏–º—É–º 0.1 USDT"}
```

**–ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ `handlers/payouts.py`:**
```python
# –î–æ:
if payout_amount < 10:

# –ü–æ—Å–ª–µ:
from core.config import MIN_WITHDRAWAL
if payout_amount < MIN_WITHDRAWAL:
```

---

## üìä –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### WAL —Ä–µ–∂–∏–º (Write-Ahead Logging)
- –ü–æ–∑–≤–æ–ª—è–µ—Ç –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–µ —á—Ç–µ–Ω–∏—è –≤–æ –≤—Ä–µ–º—è –∑–∞–ø–∏—Å–∏
- –£–ª—É—á—à–∞–µ—Ç –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å
- –°–Ω–∏–∂–∞–µ—Ç –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å –±–ª–æ–∫–∏—Ä–æ–≤–æ–∫

### –¢–∞–π–º–∞—É—Ç—ã
- **–ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –ë–î:** 30 —Å–µ–∫—É–Ω–¥
- **–û–∂–∏–¥–∞–Ω–∏–µ —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∫–∏:** 30 —Å–µ–∫—É–Ω–¥
- –î–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –≤—Å–µ—Ö –æ–ø–µ—Ä–∞—Ü–∏–π

### –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ —Å—É–º–º—ã
- **Crypto Bot –º–∏–Ω–∏–º—É–º:** 0.1 USDT
- **–ù–∞—à –º–∏–Ω–∏–º—É–º:** 30‚ÇΩ (‚âà0.37 USDT)
- **–ö—É—Ä—Å:** –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–π —á–µ—Ä–µ–∑ Crypto Bot API

---

## üöÄ –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ

–í—Å–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –∑–∞–≥—Ä—É–∂–µ–Ω—ã –Ω–∞ VDS:
```bash
# –û–±–Ω–æ–≤–ª–µ–Ω—ã —Ñ–∞–π–ª—ã:
/zenithmedia_bot/core/config.py
/zenithmedia_bot/core/crypto_pay.py
/zenithmedia_bot/core/database.py
/zenithmedia_bot/handlers/payouts.py

# –ë–æ—Ç –ø–µ—Ä–µ–∑–∞–ø—É—â–µ–Ω:
systemctl restart zenithmedia-bot

# –°—Ç–∞—Ç—É—Å:
‚úÖ active (running)
```

---

## üìù –ü—Ä–æ–≤–µ—Ä–∫–∞

### –¢–µ—Å—Ç –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–π –≤—ã–ø–ª–∞—Ç—ã:
1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–∞–±—Ä–∞–ª 30‚ÇΩ
2. –ù–∞–∂–∞–ª "–ó–∞–ø—Ä–æ—Å–∏—Ç—å –≤—ã–ø–ª–∞—Ç—É"
3. ‚úÖ –í—ã–ø–ª–∞—Ç–∞ –ø—Ä–æ—à–ª–∞ —É—Å–ø–µ—à–Ω–æ

### –¢–µ—Å—Ç –∫–æ–Ω–∫—É—Ä–µ–Ω—Ç–Ω–æ—Å—Ç–∏:
1. –ù–µ—Å–∫–æ–ª—å–∫–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç –≤–∏–¥–µ–æ
2. –ê–¥–º–∏–Ω –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ –ø—Ä–æ—Å–º–∞—Ç—Ä–∏–≤–∞–µ—Ç —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É
3. ‚úÖ –ù–µ—Ç –æ—à–∏–±–æ–∫ "database is locked"

### –¢–µ—Å—Ç WAL —Ä–µ–∂–∏–º–∞:
```sql
PRAGMA journal_mode; -- –†–µ–∑—É–ª—å—Ç–∞—Ç: WAL
PRAGMA busy_timeout; -- –†–µ–∑—É–ª—å—Ç–∞—Ç: 30000
```

---

## üéØ –†–µ–∑—É–ª—å—Ç–∞—Ç—ã

| –ü–∞—Ä–∞–º–µ—Ç—Ä | –î–æ | –ü–æ—Å–ª–µ |
|----------|-----|-------|
| –ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è –≤—ã–ø–ª–∞—Ç–∞ | ~95‚ÇΩ (1 USDT) | 30‚ÇΩ (0.37 USDT) |
| Database locked | ‚ùå –ß–∞—Å—Ç–æ | ‚úÖ –ù–µ—Ç |
| –¢–∞–π–º–∞—É—Ç –ë–î | –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é (5 —Å–µ–∫) | 30 —Å–µ–∫—É–Ω–¥ |
| WAL —Ä–µ–∂–∏–º | ‚ùå –ù–µ—Ç | ‚úÖ –í–∫–ª—é—á–µ–Ω |
| –ö–æ–Ω–∫—É—Ä–µ–Ω—Ç–Ω–æ—Å—Ç—å | ‚ùå –ü–ª–æ—Ö–∞—è | ‚úÖ –û—Ç–ª–∏—á–Ω–∞—è |

---

## üîó –°—Å—ã–ª–∫–∏

- **GitHub:** https://github.com/fredommm123/zenith-media-bot
- **–ö–æ–º–º–∏—Ç:** 06c770c "–ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è: –º–∏–Ω–∏–º—É–º –≤—ã–ø–ª–∞—Ç—ã 30‚ÇΩ, WAL —Ä–µ–∂–∏–º –ë–î, —Ç–∞–π–º–∞—É—Ç—ã"
- **VDS:** 185.176.94.108 (/zenithmedia_bot)

---

## ‚ö†Ô∏è –í–∞–∂–Ω—ã–µ –∑–∞–º–µ—Ç–∫–∏

1. **WAL —Ä–µ–∂–∏–º —Å–æ–∑–¥–∞–µ—Ç –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ñ–∞–π–ª—ã:**
   - `bot_database.db-wal` - –∂—É—Ä–Ω–∞–ª –∑–∞–ø–∏—Å–∏
   - `bot_database.db-shm` - shared memory
   - –≠—Ç–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ, –Ω–µ —É–¥–∞–ª—è–π—Ç–µ –∏—Ö!

2. **–ë–µ–∫–∞–ø:**
   - –õ–æ–∫–∞–ª—å–Ω—ã–µ –±–µ–∫–∞–ø—ã —Å–æ–∑–¥–∞—é—Ç—Å—è –∫–∞–∂–¥—ã–µ 24 —á–∞—Å–∞
   - –î–ª—è git push –Ω—É–∂–Ω–æ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å git –Ω–∞ VDS: `apt install git`

3. **–ö—É—Ä—Å –≤–∞–ª—é—Ç:**
   - –ü–æ–ª—É—á–∞–µ—Ç—Å—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ —á–µ—Ä–µ–∑ Crypto Bot API
   - –û–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –ø—Ä–∏ –∫–∞–∂–¥–æ–π –≤—ã–ø–ª–∞—Ç–µ

---

## üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ï—Å–ª–∏ –≤–æ–∑–Ω–∏–∫–Ω—É—Ç –ø—Ä–æ–±–ª–µ–º—ã:
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏: `journalctl -u zenithmedia-bot -n 50`
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ç–∞—Ç—É—Å: `systemctl status zenithmedia-bot`
3. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ: `systemctl restart zenithmedia-bot`
