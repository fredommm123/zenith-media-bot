# Changelog - –°–∏—Å—Ç–µ–º–∞ —É—Ä–æ–≤–Ω–µ–π –∏ –∏–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã—Ö —Å—Ç–∞–≤–æ–∫

## –î–∞—Ç–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è: 07.10.2025

---

## üéØ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏

### 1. ‚úÖ –°–∏—Å—Ç–µ–º–∞ —É—Ä–æ–≤–Ω–µ–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π (Bronze/Gold)

**–î–æ–±–∞–≤–ª–µ–Ω–æ:**
- ü•â **Bronze** - –≤—ã–≤–æ–¥ —á–µ—Ä–µ–∑ 24 —á–∞—Å–∞ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)
- ü•á **Gold** - –º–æ–º–µ–Ω—Ç–∞–ª—å–Ω—ã–π –≤—ã–≤–æ–¥

**–§–∞–π–ª—ã –∏–∑–º–µ–Ω–µ–Ω—ã:**
- `database.py` - –¥–æ–±–∞–≤–ª–µ–Ω–æ –ø–æ–ª–µ `tier` –≤ —Ç–∞–±–ª–∏—Ü—É users
- `handlers/payouts.py` - –ø—Ä–æ–≤–µ—Ä–∫–∞ —É—Ä–æ–≤–Ω—è –ø—Ä–∏ –æ–¥–æ–±—Ä–µ–Ω–∏–∏ –≤—ã–ø–ª–∞—Ç—ã
- `handlers/admin_settings.py` - –∫–æ–º–∞–Ω–¥—ã —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —É—Ä–æ–≤–Ω—è–º–∏

**–ö–æ–º–∞–Ω–¥—ã:**
- `/set_tier <user_id> <bronze/gold>` - —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —É—Ä–æ–≤–µ–Ω—å
- `/get_tier <user_id>` - –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å —É—Ä–æ–≤–µ–Ω—å

---

### 2. ‚úÖ –ò–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã–µ —Å—Ç–∞–≤–∫–∏ –¥–ª—è YouTube

**–°–∏—Å—Ç–µ–º–∞ —Å—Ç–∞–≤–æ–∫:**
- TikTok: 65‚ÇΩ –∑–∞ 1K –ø—Ä–æ—Å–º–æ—Ç—Ä–æ–≤ (—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–∞—è)
- YouTube: –∏–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω–∞—è —Å—Ç–∞–≤–∫–∞ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 50‚ÇΩ/1K)

**–§–∞–π–ª—ã –∏–∑–º–µ–Ω–µ–Ω—ã:**
- `database.py` - –º–µ—Ç–æ–¥—ã —Ä–∞–±–æ—Ç—ã —Å–æ —Å—Ç–∞–≤–∫–∞–º–∏
- `handlers/youtube_videos.py` - –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø–µ—Ä–≤–æ–≥–æ –≤–∏–¥–µ–æ
- `handlers/admin_settings.py` - –∫–æ–º–∞–Ω–¥—ã —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å—Ç–∞–≤–∫–∞–º–∏
- `keyboards.py` - –∫–ª–∞–≤–∏–∞—Ç—É—Ä–∞ –¥–ª—è –ø–µ—Ä–≤–æ–≥–æ –≤–∏–¥–µ–æ

**–ö–æ–º–∞–Ω–¥—ã:**
- `/set_youtube_rate <user_id> <rate>` - —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Å—Ç–∞–≤–∫—É
- `/get_rate <user_id>` - –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å —Å—Ç–∞–≤–∫—É

**Workflow –ø–µ—Ä–≤–æ–≥–æ –≤–∏–¥–µ–æ:**
1. –Æ—Ç—É–±–µ—Ä –ø–æ–¥–∞–µ—Ç –ø–µ—Ä–≤–æ–µ –≤–∏–¥–µ–æ
2. –ê–¥–º–∏–Ω –≤–∏–¥–∏—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ —Å –ø–æ–º–µ—Ç–∫–æ–π "‚≠êÔ∏è –ü–ï–†–í–û–ï –≤–∏–¥–µ–æ"
3. –ö–Ω–æ–ø–∫–∞ "üí∞ –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Å—Ç–∞–≤–∫—É" –≤–º–µ—Å—Ç–æ –æ–±—ã—á–Ω–æ–π –º–æ–¥–µ—Ä–∞—Ü–∏–∏
4. –ê–¥–º–∏–Ω –≤–≤–æ–¥–∏—Ç —Å—Ç–∞–≤–∫—É ‚Üí –≤–∏–¥–µ–æ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–¥–æ–±—Ä—è–µ—Ç—Å—è

---

### 3. ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–π –ø—Ä–æ—Ü–µ—Å—Å –≤—ã–ø–ª–∞—Ç

**Bronze —É—Ä–æ–≤–µ–Ω—å:**
- –ó–∞–ø—Ä–æ—Å —Å–æ–∑–¥–∞–µ—Ç—Å—è
- –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä **–Ω–µ –º–æ–∂–µ—Ç** –æ–¥–æ–±—Ä–∏—Ç—å —Ä–∞–Ω—å—à–µ 24 —á–∞—Å–æ–≤
- –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è —Å–æ–æ–±—â–µ–Ω–∏–µ: "‚è≥ –û—Å—Ç–∞–ª–æ—Å—å: X.X—á"
- –ß–µ—Ä–µ–∑ 24—á ‚Üí –æ–¥–æ–±—Ä–µ–Ω–∏–µ ‚Üí –∞–≤—Ç–æ–≤—ã–ø–ª–∞—Ç–∞ USDT

**Gold —É—Ä–æ–≤–µ–Ω—å:**
- –ó–∞–ø—Ä–æ—Å —Å–æ–∑–¥–∞–µ—Ç—Å—è
- –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä **–º–æ–∂–µ—Ç –æ–¥–æ–±—Ä–∏—Ç—å —Å—Ä–∞–∑—É**
- –ú–æ–º–µ–Ω—Ç–∞–ª—å–Ω–∞—è –∞–≤—Ç–æ–≤—ã–ø–ª–∞—Ç–∞ USDT

**–£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –∞–¥–º–∏–Ω—É:**
–¢–µ–ø–µ—Ä—å –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç —É—Ä–æ–≤–µ–Ω—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:
```
üë§ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å:
  ‚Ä¢ ü•â –£—Ä–æ–≤–µ–Ω—å: BRONZE (24—á –∑–∞–¥–µ—Ä–∂–∫–∞)
  
–∏–ª–∏

  ‚Ä¢ ü•á –£—Ä–æ–≤–µ–Ω—å: GOLD (–º–æ–º–µ–Ω—Ç–∞–ª—å–Ω–æ)
```

---

## üìÇ –ù–æ–≤—ã–µ —Ñ–∞–π–ª—ã

### –ö–æ–¥
- `handlers/admin_settings.py` - –∞–¥–º–∏–Ω—Å–∫–∏–µ –∫–æ–º–∞–Ω–¥—ã –¥–ª—è —Å—Ç–∞–≤–æ–∫ –∏ —É—Ä–æ–≤–Ω–µ–π
- `migrate_add_tier.py` - –º–∏–≥—Ä–∞—Ü–∏—è –ë–î (—É–∂–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∞)

### –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- `TIER_SYSTEM_GUIDE.md` - –ø–æ–ª–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ
- `ADMIN_COMMANDS.md` - –∫—Ä–∞—Ç–∫–∞—è —Å–ø—Ä–∞–≤–∫–∞ –∫–æ–º–∞–Ω–¥

---

## üîß –ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö —Ñ–∞–π–ª–∞—Ö

### database.py
```python
# –ù–æ–≤–æ–µ –ø–æ–ª–µ –≤ users
tier TEXT DEFAULT 'bronze'

# –ù–æ–≤—ã–µ –º–µ—Ç–æ–¥—ã
async def set_user_tier(user_id, tier) -> bool
async def get_user_tier(user_id) -> str
async def check_first_youtube_video(user_id) -> bool
async def set_youtube_rate(user_id, rate) -> bool
async def get_youtube_rate(user_id) -> Optional[float]
```

### handlers/payouts.py
```python
# –ü—Ä–æ–≤–µ—Ä–∫–∞ —É—Ä–æ–≤–Ω—è –ø—Ä–∏ –æ–¥–æ–±—Ä–µ–Ω–∏–∏
user_tier = await db.get_user_tier(user_id)
if user_tier == 'bronze':
    hours_passed = (now - payout_created).total_seconds() / 3600
    if hours_passed < 24:
        # –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –≤—ã–ø–ª–∞—Ç—ã

# –ü–æ–∫–∞–∑ —É—Ä–æ–≤–Ω—è –≤ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–∏
tier_emoji = "ü•â" if user_tier == "bronze" else "ü•á"
```

### handlers/youtube_videos.py
```python
# –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–µ—Ä–≤–æ–≥–æ –≤–∏–¥–µ–æ
is_first_video = await db.check_first_youtube_video(user_id)
current_rate = await db.get_youtube_rate(user_id)

if is_first_video and current_rate is None:
    # –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ —Å –∫–Ω–æ–ø–∫–æ–π —É—Å—Ç–∞–Ω–æ–≤–∫–∏ —Å—Ç–∞–≤–∫–∏
    keyboard = first_youtube_video_keyboard(video_id)
```

### keyboards.py
```python
def first_youtube_video_keyboard(video_id):
    """–ö–Ω–æ–ø–∫–∏ –¥–ª—è –ø–µ—Ä–≤–æ–≥–æ YouTube –≤–∏–¥–µ–æ"""
    return [
        [üí∞ –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Å—Ç–∞–≤–∫—É],
        [‚ùå –û—Ç–∫–ª–æ–Ω–∏—Ç—å]
    ]
```

### bot.py
```python
# –î–æ–±–∞–≤–ª–µ–Ω –Ω–æ–≤—ã–π —Ä–æ—É—Ç–µ—Ä
from handlers import admin_settings
dp.include_router(admin_settings.router)
```

---

## üóÑÔ∏è –ú–∏–≥—Ä–∞—Ü–∏—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

–í—ã–ø–æ–ª–Ω–µ–Ω–∞ –º–∏–≥—Ä–∞—Ü–∏—è:
```bash
python migrate_add_tier.py
```

–†–µ–∑—É–ª—å—Ç–∞—Ç:
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–æ –ø–æ–ª–µ `tier` –≤ —Ç–∞–±–ª–∏—Ü—É `users`
- ‚úÖ –í—Å–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –ø–æ–ª—É—á–∏–ª–∏ —É—Ä–æ–≤–µ–Ω—å 'bronze'

---

## üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∏–∑–º–µ–Ω–µ–Ω–∏–π

**–ù–æ–≤—ã—Ö —Ñ–∞–π–ª–æ–≤:** 4
- handlers/admin_settings.py (315 —Å—Ç—Ä–æ–∫)
- migrate_add_tier.py (39 —Å—Ç—Ä–æ–∫)
- TIER_SYSTEM_GUIDE.md (–ø–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è)
- ADMIN_COMMANDS.md (–∫—Ä–∞—Ç–∫–∞—è —Å–ø—Ä–∞–≤–∫–∞)

**–ò–∑–º–µ–Ω–µ–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤:** 6
- database.py (+60 —Å—Ç—Ä–æ–∫)
- handlers/payouts.py (+40 —Å—Ç—Ä–æ–∫)
- handlers/youtube_videos.py (+30 —Å—Ç—Ä–æ–∫)
- keyboards.py (+12 —Å—Ç—Ä–æ–∫)
- bot.py (+2 —Å—Ç—Ä–æ–∫–∏)
- .env (–æ–±–Ω–æ–≤–ª–µ–Ω ADMIN_CHAT_ID)

**–ù–æ–≤—ã—Ö –∫–æ–º–∞–Ω–¥:** 4
- /set_tier
- /get_tier
- /set_youtube_rate
- /get_rate

**–ù–æ–≤—ã—Ö –º–µ—Ç–æ–¥–æ–≤ –ë–î:** 4
- set_user_tier()
- get_user_tier()
- check_first_youtube_video()
- set_youtube_rate()
- get_youtube_rate()

---

## ‚úÖ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –ü—Ä–æ–≤–µ—Ä–µ–Ω–æ:
- ‚úÖ –ë–æ—Ç –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –±–µ–∑ –æ—à–∏–±–æ–∫
- ‚úÖ –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ Crypto Pay API —É—Å–ø–µ—à–Ω–æ
- ‚úÖ –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –º–∏–≥—Ä–∏—Ä–æ–≤–∞–Ω–∞
- ‚úÖ –ú–æ–¥—É–ª—å requests —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω
- ‚úÖ –ù–æ–≤—ã–µ –∫–æ–º–∞–Ω–¥—ã –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω—ã
- ‚úÖ –†–æ—É—Ç–µ—Ä admin_settings –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω

### –¢—Ä–µ–±—É–µ—Ç —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è:
- ‚è≥ –£—Å—Ç–∞–Ω–æ–≤–∫–∞ —Å—Ç–∞–≤–∫–∏ –¥–ª—è –ø–µ—Ä–≤–æ–≥–æ –≤–∏–¥–µ–æ
- ‚è≥ –ò–∑–º–µ–Ω–µ–Ω–∏–µ —É—Ä–æ–≤–Ω—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- ‚è≥ –ü—Ä–æ–≤–µ—Ä–∫–∞ 24-—á–∞—Å–æ–≤–æ–π –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ –¥–ª—è Bronze
- ‚è≥ –ú–æ–º–µ–Ω—Ç–∞–ª—å–Ω–∞—è –≤—ã–ø–ª–∞—Ç–∞ –¥–ª—è Gold

---

## üöÄ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

1. **–ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å —Å —Ä–µ–∞–ª—å–Ω—ã–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º:**
   - –ü–æ–¥–∞—á–∞ –ø–µ—Ä–≤–æ–≥–æ YouTube –≤–∏–¥–µ–æ
   - –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω–æ–π —Å—Ç–∞–≤–∫–∏
   - –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞—Å—á–µ—Ç–∞ –≤—ã–ø–ª–∞—Ç—ã

2. **–ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å —Å–∏—Å—Ç–µ–º—É —É—Ä–æ–≤–Ω–µ–π:**
   - –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å Gold –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é
   - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –º–æ–º–µ–Ω—Ç–∞–ª—å–Ω—É—é –≤—ã–ø–ª–∞—Ç—É
   - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –±–ª–æ–∫–∏—Ä–æ–≤–∫—É Bronze –≤—ã–ø–ª–∞—Ç—ã

3. **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥:**
   - –û—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å —Ä–∞–±–æ—Ç—É –±—ã—Å—Ç—Ä–æ–≥–æ –ø–∞—Ä—Å–∏–Ω–≥–∞ (requests)
   - –ü—Ä–æ–≤–µ—Ä—è—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –≤ –Ω–æ–≤—ã–π –∞–¥–º–∏–Ω-—á–∞—Ç (-1003062896752)
   - –õ–æ–≥–∏ Crypto Pay API

---

## üìù –ó–∞–º–µ—Ç–∫–∏

- –í—Å–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–ª—É—á–∏–ª–∏ Bronze —É—Ä–æ–≤–µ–Ω—å
- TikTok –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ —Ç–∞–∫–∂–µ –∏–º–µ—é—Ç —É—Ä–æ–≤–µ–Ω—å (–≤–ª–∏—è–µ—Ç –Ω–∞ —Å–∫–æ—Ä–æ—Å—Ç—å –≤—ã–ø–ª–∞—Ç)
- –°—Ç–∞–≤–∫–∏ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ –±–∞–∑–µ –∏ –Ω–µ —Å–±—Ä–∞—Å—ã–≤–∞—é—Ç—Å—è
- –ú–æ–∂–Ω–æ –∏–∑–º–µ–Ω–∏—Ç—å —Å—Ç–∞–≤–∫—É –≤ –ª—é–±–æ–µ –≤—Ä–µ–º—è –∫–æ–º–∞–Ω–¥–æ–π /set_youtube_rate
- –ê–¥–º–∏–Ω-—á–∞—Ç –æ–±–Ω–æ–≤–ª–µ–Ω –Ω–∞ –Ω–æ–≤—ã–π ID –ø–æ—Å–ª–µ –º–∏–≥—Ä–∞—Ü–∏–∏ –≥—Ä—É–ø–ø—ã –≤ —Å—É–ø–µ—Ä–≥—Ä—É–ø–ø—É

---

## üéâ –ò—Ç–æ–≥–∏

‚úÖ **–°–∏—Å—Ç–µ–º–∞ —É—Ä–æ–≤–Ω–µ–π** - –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞
‚úÖ **–ò–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã–µ —Å—Ç–∞–≤–∫–∏** - –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã
‚úÖ **–ü–µ—Ä–≤–æ–µ –≤–∏–¥–µ–æ workflow** - —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω —Å –∫–Ω–æ–ø–∫–æ–π —É—Å—Ç–∞–Ω–æ–≤–∫–∏ —Å—Ç–∞–≤–∫–∏
‚úÖ **–ü—Ä–æ–≤–µ—Ä–∫–∞ 24 —á–∞—Å–æ–≤** - —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –¥–ª—è Bronze
‚úÖ **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è** - —Å–æ–∑–¥–∞–Ω–∞ –ø–æ–ª–Ω–∞—è –∏ –∫—Ä–∞—Ç–∫–∞—è —Å–ø—Ä–∞–≤–∫–∞
‚úÖ **–ú–∏–≥—Ä–∞—Ü–∏—è –ë–î** - –≤—ã–ø–æ–ª–Ω–µ–Ω–∞ —É—Å–ø–µ—à–Ω–æ

–í—Å–µ —Ñ—É–Ω–∫—Ü–∏–∏ –≥–æ—Ç–æ–≤—ã –∫ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é! üöÄ
